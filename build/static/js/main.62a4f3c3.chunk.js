(this["webpackJsonppic-club"]=this["webpackJsonppic-club"]||[]).push([[0],{52:function(e,t,c){},57:function(e,t,c){"use strict";c.r(t);var a=c(2),s=c(1),n=c.n(s),i=c(25),r=c.n(i),l=c(7),o=c(29);c(45),c(58),c(59);o.a.initializeApp({apiKey:"AIzaSyC0FEiezlrXqplbE2J1aOaAFrG7bJdVSMk",authDomain:"pic-club.firebaseapp.com",projectId:"pic-club",storageBucket:"pic-club.appspot.com",messagingSenderId:"109751013083",appId:"1:109751013083:web:a65c7c45422476d22046fe"});var d=o.a,j=c(10),u=(c(52),c(53),c(8)),b=c.n(u),m=c(13),h="SET_USER",O="SET_LOADING",p="CLEAR_USER",f="AUTH_ERROR",x=function(e){return{type:O,payload:e}},g=function(){return{type:p}},v=Object(j.b)((function(e){return{isAuthenticated:e.userData.isAuthenticated,userDetails:e.userData.currentUser}}),{clearUser:g})((function(e){var t=e.userDetails,c=e.isAuthenticated,n=e.clearUser;Object(s.useEffect)((function(){var e=document.querySelectorAll(".sidenav");b.a.Sidenav.init(e,{})}),[]);var i=Object(a.jsxs)(s.Fragment,{children:[Object(a.jsx)("li",{children:Object(a.jsx)("div",{className:"user-view",children:t&&(t.displayName?Object(a.jsxs)("h5",{children:["Welcome ",t.displayName,"!"]}):Object(a.jsx)("h5",{children:"Welcome User!"}))})}),Object(a.jsx)("li",{className:"divider"}),Object(a.jsx)("li",{children:Object(a.jsx)(m.b,{to:"/",children:"Home"})}),Object(a.jsx)("li",{className:"divider"}),Object(a.jsx)("li",{children:Object(a.jsx)("a",{href:"#!",onClick:function(){d.auth().signOut().then((function(){n()})).catch((function(e){console.error(e)}))},children:"Sign Out"})})]}),r=Object(a.jsxs)(s.Fragment,{children:[Object(a.jsx)("li",{children:Object(a.jsx)(m.b,{to:"/register",children:"Register"})}),Object(a.jsx)("li",{children:Object(a.jsx)(m.b,{to:"/login",children:"Login"})})]});return Object(a.jsx)("div",{children:Object(a.jsxs)(s.Fragment,{children:[Object(a.jsx)("div",{className:"navbar-fixed",children:Object(a.jsx)("nav",{style:{marginBottom:"30px",backgroundColor:"#6930c3"},children:Object(a.jsxs)("div",{className:"nav-wrapper",children:[Object(a.jsx)(m.b,{to:"/",className:"brand-logo",id:"logo",style:{marginLeft:"5px"},children:"Pic-Club"}),Object(a.jsx)("a",{href:"#!","data-target":"mobile-demo",className:"sidenav-trigger",children:Object(a.jsx)("i",{className:"material-icons",children:"menu"})}),Object(a.jsx)("ul",{className:"right hide-on-med-and-down",children:c?i:r})]})})}),Object(a.jsx)("ul",{className:"sidenav",id:"mobile-demo",children:c?i:r})]})})})),N=c(23),w=c(5),y=c(17),A=function(){return Object(a.jsxs)(s.Fragment,{children:[Object(a.jsx)(v,{}),Object(a.jsx)("div",{className:"center",children:Object(a.jsx)("div",{className:"preloader-wrapper big active ",children:Object(a.jsxs)("div",{className:"spinner-layer spinner-blue-only",children:[Object(a.jsx)("div",{className:"circle-clipper left",children:Object(a.jsx)("div",{className:"circle"})}),Object(a.jsx)("div",{className:"gap-patch",children:Object(a.jsx)("div",{className:"circle"})}),Object(a.jsx)("div",{className:"circle-clipper right",children:Object(a.jsx)("div",{className:"circle"})})]})})})]})},S=Object(j.b)((function(e){return{isAuthenticated:e.userData.isAuthenticated,loading:e.userData.isLoading}}),{setLoading:x,authError:function(){return{type:f}}})((function(e){var t=e.isAuthenticated,c=e.setLoading,n=e.loading,i=e.authError,r=Object(s.useState)({email:"",password:""}),o=Object(y.a)(r,2),j=o[0],u=o[1],h=j.email,O=j.password,p=function(e){u(Object(w.a)(Object(w.a)({},j),{},Object(N.a)({},e.target.name,e.target.value)))};return t?Object(a.jsx)(l.a,{to:"/"}):n?Object(a.jsx)(A,{}):Object(a.jsx)("div",{children:Object(a.jsxs)(s.Fragment,{children:[Object(a.jsxs)("div",{className:"row",children:[Object(a.jsxs)("form",{className:"col s12",onSubmit:function(e){if(e.preventDefault(),""===h&&""===O){b.a.toast({html:'<div className="purple">Please enter all fields to continue.</div>',classes:"rounded"})}else c(!0),d.auth().signInWithEmailAndPassword(h,O).then((function(){})).catch((function(e){console.error(e),"auth/user-not-found"===e.code?(b.a.toast({html:"Invalid credentials",classes:"rounded"}),i()):"auth/wrong-password"===e.code&&(b.a.toast({html:"Wrong password",classes:"rounded"}),i())}));u({email:"",password:""})},children:[Object(a.jsxs)("h3",{className:"center",children:["Account ",Object(a.jsx)("span",{className:"deep-purple-text",children:"Login"})]}),Object(a.jsxs)("div",{className:"row",children:[Object(a.jsxs)("div",{className:"input-field col l6 m6 s12",children:[Object(a.jsx)("input",{type:"email",name:"email",value:h,onChange:p}),Object(a.jsx)("label",{htmlFor:"email",children:"Email ID"})]}),Object(a.jsxs)("div",{className:"input-field col l6 m6 s12",children:[Object(a.jsx)("input",{type:"password",name:"password",value:O,onChange:p}),Object(a.jsx)("label",{htmlFor:"email",children:"Password"})]})]}),Object(a.jsx)("div",{className:"center",children:Object(a.jsxs)("button",{className:"btn waves-effect waves-light deep-purple",children:["Submit",Object(a.jsx)("i",{className:"material-icons right",children:"send"})]})})]}),Object(a.jsx)("div",{className:"center ",children:Object(a.jsxs)("button",{className:"btn waves-effect waves-light red",style:{marginTop:"12px"},onClick:function(){var e=new d.auth.GoogleAuthProvider;d.auth().signInWithPopup(e).then((function(){})).catch((function(e){console.error(e)}))},children:["Sign In with Google",Object(a.jsx)("i",{className:"material-icons right",children:"send"})]})})]}),Object(a.jsx)("div",{className:"center mt-3",children:Object(a.jsxs)("h5",{children:["New user?"," ",Object(a.jsx)(m.b,{to:"/register",className:"deep-purple-text",children:"Register"})]})})]})})})),D=Object(j.b)((function(e){return{isAuthenticated:e.userData.isAuthenticated,loading:e.userData.isLoading}}),{setLoading:x})((function(e){var t=e.isAuthenticated,c=e.loading,n=e.setLoading;Object(s.useEffect)((function(){b.a.updateTextFields()}));var i=Object(s.useState)({userName:"",password:"",password2:"",email:""}),r=Object(y.a)(i,2),o=r[0],j=r[1],u=o.userName,h=o.password,O=o.password2,p=o.email,f=function(e){j(Object(w.a)(Object(w.a)({},o),{},Object(N.a)({},e.target.name,e.target.value)))};return t?Object(a.jsx)(l.a,{to:"/"}):c?Object(a.jsx)(A,{}):Object(a.jsxs)(s.Fragment,{children:[Object(a.jsx)("div",{className:"row",children:Object(a.jsxs)("form",{className:"col s12",onSubmit:function(e){e.preventDefault(),""===u&&""===h&&""===O&&""===p?b.a.toast({html:"Please enter all fields to continue",classes:"rounded"}):h!==O?b.a.toast({html:"Passwords didn't match.",classes:"rounded"}):(n(!0),d.auth().createUserWithEmailAndPassword(p,h).catch((function(e){console.error(e)}))),j({userName:"",password:"",password2:"",email:""})},children:[Object(a.jsxs)("h3",{className:"center",id:"register-header",children:["Account ",Object(a.jsx)("span",{className:"deep-purple-text accent-2",children:"Register"})]}),Object(a.jsxs)("div",{className:"row ",children:[Object(a.jsxs)("div",{className:"input-field col l6 m6 s12",children:[Object(a.jsx)("input",{type:"text",name:"userName",value:u,onChange:f,placeholder:"Enter your name..."}),Object(a.jsx)("label",{htmlFor:"name",children:"Name"})]}),Object(a.jsxs)("div",{className:"input-field col l6 m6 s12",children:[Object(a.jsx)("input",{type:"email",name:"email",value:p,onChange:f,placeholder:"Enter your email id..."}),Object(a.jsx)("label",{htmlFor:"email",children:"Email ID"})]}),Object(a.jsxs)("div",{className:"input-field col l6 m6 s12",children:[Object(a.jsx)("input",{type:"password",name:"password",value:h,onChange:f,placeholder:"Enter your password..."}),Object(a.jsx)("label",{htmlFor:"password",children:"Password"})]}),Object(a.jsxs)("div",{className:"input-field col l6 m6 s12",children:[Object(a.jsx)("input",{type:"password",name:"password2",value:O,onChange:f,placeholder:"Confirm password..."}),Object(a.jsx)("label",{htmlFor:"password",children:"Confirm Password"})]})]}),Object(a.jsx)("div",{className:"center",children:Object(a.jsxs)("button",{className:"btn waves-effect waves-light deep-purple",type:"submit",children:["Submit",Object(a.jsx)("i",{className:"material-icons right",children:"send"})]})})]})}),Object(a.jsx)("div",{className:"center mt-3",children:Object(a.jsxs)("h5",{children:["Already a user?"," ",Object(a.jsx)(m.b,{to:"/login",className:"deep-purple-text",children:"Login"})]})})]})})),C=c(33),I=c.n(C),E=c(36),F=function(e,t){var c=Object(s.useState)({url:"",error:[]}),a=Object(y.a)(c,2),n=a[0],i=a[1],r=n.url,l=n.error,o=d.storage().ref().child("images/".concat(t.uid,"/").concat(e.name)),j=d.firestore().collection("allImages").doc(t.uid).collection("images");return Object(s.useEffect)((function(){o.put(e).on("state_changed",(function(e){}),(function(e){i(Object(w.a)(Object(w.a)({},n),{},{error:l.concat(e)}))}),Object(E.a)(I.a.mark((function c(){var a;return I.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,o.getDownloadURL();case 2:a=c.sent,j.add({fileName:e.name,email:t.email,url:a,createdAt:(new Date).toISOString()}),i(Object(w.a)(Object(w.a)({},n),{},{url:a}));case 5:case"end":return c.stop()}}),c)}))))}),[e]),{error:l,url:r}},L=Object(j.b)((function(e){return{userDetails:e.userData.currentUser}}),null)((function(e){var t=e.file,c=e.setFile,n=e.userDetails,i=F(t,n).url;return Object(s.useEffect)((function(){i&&c({file:null})}),[i,c]),Object(a.jsx)("div",{className:"progress",children:Object(a.jsx)("div",{className:"indeterminate"})})})),U=function(){var e=Object(s.useState)({file:null}),t=Object(y.a)(e,2),c=t[0],n=t[1],i=c.file,r=["image/jpeg","image/png"];return Object(a.jsxs)(s.Fragment,{children:[Object(a.jsx)("form",{action:"#",children:Object(a.jsxs)("div",{className:"file-field input-field",children:[Object(a.jsxs)("div",{className:"btn",style:{backgroundColor:"#e61c5d"},children:[Object(a.jsx)("span",{children:"Choose An Image"}),Object(a.jsx)("input",{type:"file",onChange:function(e){var t=e.target.files[0];r.includes(t&&t.type)?n(Object(w.a)(Object(w.a)({},c),{},{file:t})):(n(Object(w.a)(Object(w.a)({},c),{},{file:null})),b.a.toast({html:"Please select image of format (jpeg,png) only.",classes:"rounded"}))}})]}),Object(a.jsx)("div",{className:"file-path-wrapper",children:Object(a.jsx)("input",{className:"file-path validate",type:"text"})})]})}),i&&Object(a.jsx)(L,{file:i,setFile:n})]})},k=function(){return Object(s.useEffect)((function(){var e=document.querySelectorAll(".modal");b.a.Modal.init(e,{})})),Object(a.jsxs)(s.Fragment,{children:[Object(a.jsx)("div",{className:"fixed-action-btn",children:Object(a.jsx)("a",{className:"btn-floating btn-large waves-effect waves-light\r modal-trigger\r ",href:"#fileModal",style:{backgroundColor:"#e61c5d"},children:Object(a.jsx)("i",{className:"material-icons",children:"add"})})}),Object(a.jsxs)("div",{id:"fileModal",className:"modal bottom-sheet open",children:[Object(a.jsxs)("div",{className:"modal-content",children:[Object(a.jsx)("h4",{className:"flow-text",children:"Select an image"}),Object(a.jsx)("p",{className:"helper-text",children:"(jpeg, png only)"}),Object(a.jsx)(U,{})]}),Object(a.jsx)("div",{className:"modal-footer",children:Object(a.jsx)("a",{href:"#!",className:"modal-close waves-effect waves-light btn\r deep-purple accent-2",children:"Close"})})]})]})},P=c(34),R=c(37),T=c.n(R),M=Object(j.b)((function(e){return{userDetails:e.userData.currentUser}}),null)((function(e){var t=e.doc,c=e.userDetails,n=e.setSelectedImg;return Object(a.jsx)(s.Fragment,{children:Object(a.jsxs)(P.a.div,{className:"card hoverable",layout:!0,children:[Object(a.jsxs)("div",{className:"card-image",children:[Object(a.jsx)(P.a.img,{src:t.url,alt:"",initial:{opacity:0},animate:{opacity:1}}),Object(a.jsx)("button",{className:"btn-floating halfway-fab waves-effect waves-light",style:{backgroundColor:"#e61c5d"},onClick:function(){return e=t.fileName,a=t.id,d.storage().ref().child("images/".concat(c.uid,"/").concat(e)).delete().then((function(){b.a.toast({html:"Deleted Successfully!",classes:"rounded"})})).catch((function(e){console.error(e)})),void d.firestore().collection("allImages").doc(c.uid).collection("images").doc(a).delete().then((function(){})).catch((function(e){return console.error(e)}));var e,a},children:Object(a.jsx)("i",{className:"material-icons",children:"delete"})})]}),Object(a.jsx)("div",{className:"card-content",children:Object(a.jsxs)("p",{children:["Added: ",T()(t.createdAt).fromNow()]})}),Object(a.jsx)("div",{className:"card-action",children:Object(a.jsx)("button",{className:"btn modal-trigger",onClick:function(){return e=t.url,void n(e);var e},"data-target":"viewImage",style:{backgroundColor:"#6930c3"},children:"View"})})]})})})),W=function(e,t){var c=Object(s.useState)([]),a=Object(y.a)(c,2),n=a[0],i=a[1];return Object(s.useEffect)((function(){var e=d.firestore().collection("allImages").doc(t.uid).collection("images").orderBy("createdAt","desc").onSnapshot((function(e){var t=[];e.forEach((function(e){t.push(Object(w.a)(Object(w.a)({},e.data()),{},{id:e.id}))})),i(t)}));return function(){return e()}}),[e,t]),{docs:n}},B=Object(j.b)((function(e){return{userDetails:e.userData.currentUser}}),null)((function(e){var t=e.userDetails,c=e.setSelectedImg,s=W("images",t).docs;return Object(a.jsx)("div",{children:Object(a.jsxs)("div",{className:"container",id:"img-grid",children:[s.length<1&&Object(a.jsx)("h4",{className:"flow-text",children:"Please Select the below add button to upload an image."}),s&&s.map((function(e){return Object(a.jsx)(M,{doc:e,setSelectedImg:c},e.createdAt)}))]})})})),_=function(e){var t=e.selectedImg;return Object(s.useEffect)((function(){var e=document.querySelectorAll(".modal");b.a.Modal.init(e,{})})),Object(a.jsxs)("div",{id:"viewImage",className:"modal",children:[Object(a.jsx)("div",{className:"modal-content",children:Object(a.jsx)("img",{src:t,alt:"",className:"responsive-img"})}),Object(a.jsx)("div",{className:"modal-footer",children:Object(a.jsx)("a",{href:"#!",className:"modal-close waves-effect btn ",style:{backgroundColor:"#e61c5d"},children:"Close"})})]})},q=Object(j.b)((function(e){return{isAuthenticated:e.userData.isAuthenticated}}),null)((function(e){var t=e.isAuthenticated,c=Object(s.useState)(null),n=Object(y.a)(c,2),i=n[0],r=n[1];return t?Object(a.jsxs)("div",{children:[Object(a.jsx)(k,{}),Object(a.jsx)(B,{setSelectedImg:r}),i&&Object(a.jsx)(_,{selectedImg:i})]}):Object(a.jsx)(l.a,{to:"/login"})})),G=Object(l.g)(Object(j.b)((function(e){return{loading:e.userData.isLoading}}),{setUser:function(e){return{type:h,payload:e}},setLoading:x})((function(e){var t=e.setUser,c=e.loading;e.setLoading;return Object(s.useEffect)((function(){b.a.AutoInit(),d.auth().onAuthStateChanged((function(e){e?t(e):g()}))})),c?Object(a.jsx)(A,{}):Object(a.jsxs)(s.Fragment,{children:[Object(a.jsx)(v,{}),Object(a.jsxs)(l.d,{children:[Object(a.jsx)(l.b,{exact:!0,path:"/",component:q}),Object(a.jsx)(l.b,{path:"/login",component:S}),Object(a.jsx)(l.b,{path:"/register",component:D})]})]})}))),J=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,61)).then((function(t){var c=t.getCLS,a=t.getFID,s=t.getFCP,n=t.getLCP,i=t.getTTFB;c(e),a(e),s(e),n(e),i(e)}))},z=c(20),H=c(38),V=c(39),K={currentUser:null,isAuthenticated:!1,isLoading:!1,selectedImage:null},X=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case h:return Object(w.a)(Object(w.a)({},e),{},{currentUser:t.payload,isAuthenticated:!0,isLoading:!1});case O:return Object(w.a)(Object(w.a)({},e),{},{isLoading:t.payload});case p:case f:return Object(w.a)(Object(w.a)({},e),{},{currentUser:null,isAuthenticated:!1,isLoading:!1});default:return e}},Q=Object(z.combineReducers)({userData:X}),Y=[V.a],Z=Object(z.createStore)(Q,{},Object(H.composeWithDevTools)(z.applyMiddleware.apply(void 0,Y)));r.a.render(Object(a.jsx)(n.a.StrictMode,{children:Object(a.jsx)(j.a,{store:Z,children:Object(a.jsx)(m.a,{children:Object(a.jsx)(G,{})})})}),document.getElementById("root")),J()}},[[57,1,2]]]);
//# sourceMappingURL=main.62a4f3c3.chunk.js.map